<!DOCTYPE html>
<html lang="en">

<head>
    <title>Republican and Democratic Governors Association Donors</title>
    <meta charset="utf-8">
    <meta name="robots" content="noindex,follow">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Roboto|Roboto+Condensed:700|Roboto+Mono" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/dataTables.foundation.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/foundation/6.2.4/foundation.min.css" />
    <link rel="stylesheet" href="//cdn.datatables.net/responsive/2.2.1/css/responsive.dataTables.min.css" />
    <link rel="stylesheet" href="//cdn.datatables.net/responsive/2.2.1/css/responsive.foundation.min.css" />
    <!-- <link rel="stylesheet" href="jquery.dataTables.yadcf.css" /> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css" />
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/dataTables.foundation.min.js"></script>
    <script src="https://cdn.jsdelivr.net/foundation/6.2.4/foundation.min.js"></script>
    <script src="//cdn.datatables.net/plug-ins/1.10.16/dataRender/datetime.js"></script>
    <script src="//cdn.datatables.net/responsive/2.2.1/js/dataTables.responsive.min.js"></script>
    <script src="//cdn.datatables.net/responsive/2.2.1/js/responsive.foundation.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/yadcf/0.9.2/jquery.dataTables.yadcf.js"></script>
    <!-- <script src="jquery.dataTables.yadcf.js"></script> -->
    <style>
    body {
        background-color: #fafafa;
    }

    .table-title {
        font-family: 'Roboto', sans-serif;
    }

    .body-text {
        font-family: 'Roboto', sans-serif;
    }

    #filters {
        font-size: .85rem;
    }

    #rga-donor-table-container {
        margin-top: 10px;
        padding: 3px;
    }

    #rga-donor-table {
        font-size: .85rem;
        font-family: 'Roboto', sans-serif;
    }

    button.yadcf-filter-reset-button {
        color: red;
        margin-left: 10px;
    }

    select {
        margin-top: 7px;
        margin-bottom: 0;
        font-size: .85rem;
    }

    .dem {
        background-color: lightblue;
        width: 15px;
        height: 15px;
        margin-left: .5em;
    }

    .rep {
        background-color: red;
        width: 15px;
        height: 15px;
        margin-left: .5em;
    }

    .yadcf-filter-range {
        height: 2.9em;
        border: 1px solid silver;
    }

    .filter-text {
        font-weight: bold;
        margin-top: .5em;
        margin-bottom: .5em;
    }
    </style>
</head>

<body>
    <div id="rga-donor-table-container">
        <div class="row">
            <div class="large-12 columns">
                <h2 class="body-text">Title will go here and here and here</h2>
                <p class="table-title">Chatter will go here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here and here. <strong>And let's mention the source of the data and link to it if possible</strong>.</p>
            </div>
        </div>
        <div id="filters">
            <div class="row">
                <div class="large-6 medium-6 small-6 columns">
                    <span id="party-filter" style="font-weight: bold;"></span>
                </div>
                <div class="large-6 medium-6 small-6 columns">
                    <span id="donor-name-filter" style="font-weight: bold;"></span>
                </div>
            </div>
            <div class="row">
                <div class="large-6 medium-6 small-6 columns">
                    <span id="city-filter" style="font-weight: bold;"></span>
                </div>
                <div class="large-6 medium-6 small-6 columns">
                    <span id="year-filter" style="font-weight: bold;"></span>
                </div>
            </div>
            <div class="row">
                <div class="large-6 small-12 left columns">
                <p class="filter-text">Select amount</p>
                    <span id="amount-filter" style="font-weight: bold;"></span>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="large-12 columns">
                <table id="rga-donor-table" cellspacing="0" width="100%">
                    <thead>
                        <tr>
                            <th></th>
                            <th data-priority="3">Party</th>
                            <th data-priority="1">Name</th>
                            <th data-priority="2">Amount</th>
                            <th data-priority="4">Date</th>
                            <th data-priority="5">City</th>
                            <th data-priority="6">Occupation</th>
                            <th data-priority="7">Employer</th>
                            <th data-priority="">Year</th>
                        </tr>
                    </thead>
                    <tfoot>
                    </tfoot>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <script>
    var dataFile = 'all-donors-9-18-18.json'

    $(document).ready(function() {
        function disableDependentFilter(level, inuse) {
            if (level < 4) {
                filter = $('#yadcf-filter--example-' + level);
                yadcf.exResetFilters(rgaDonorTable, [level]);
                filter.prop('disabled', !inuse);

                disableDependentFilter(level + 1, false);
            }
        }

        var rgaDonorTable = $('#rga-donor-table').DataTable({
            ajax: {
                'url': dataFile,
                'dataSrc': ''
            },
            pageLength: 15,
            responsive: {
                details: {
                    type: 'column'
                }
            },
            dom: '<if<t>lp>',
            columnDefs: [{
                className: 'control',
                orderable: false,
                targets: 0
            }],
            order: [
                [3, 'desc']
            ],
            columns: [
                { data: 'button' },
                {
                    data: 'party',
                    // render: function(data, type, row) {
                    //     if (data == 'DEM') {
                    //         return '<div class="dem">&nbsp;</div>'
                    //     } else if (data == 'REP') {
                    //         return '<div class="rep">&nbsp;</div>'
                    //     }
                    // }
                },
                { data: 'donorName' },
                {
                    data: 'amount',
                    render: $.fn.dataTable.render.number(',', '.', 0, '$')
                },
                {
                    data: 'date',
                    type: 'date'
                },
                { data: 'city' },
                { data: 'occupation' },
                { data: 'employer' },
                {
                    data: 'year',
                    visible: false
                }

                // {
                //     data: 'stockReturn2017',
                //     // render: function(data, type, full, meta) {
                //     //     return +data + '%';
                //     // },
                //     render: $.fn.dataTable.render.number(',', '.', 0, '', '%'),
                //     defaultContent: "" // not working on NaN
                // },
                // {
                //     data: 'sex',
                //     visible: false
                // }
            ],

            initComplete: function() {
                yadcf.init(rgaDonorTable, [{
                        column_number: 1,
                        filter_container_id: 'party-filter',
                        filter_default_label: 'Select party'
                    }, {
                        column_number: 2,
                        filter_container_id: 'donor-name-filter',
                        filter_default_label: 'Select donor'
                    }, {
                        column_number: 3,
                        filter_container_id: 'amount-filter',
                        // column_data_type: 'rendered_html',
                        filter_type: 'range_number'
                    },
                    {
                        column_number: 5,
                        filter_container_id: 'city-filter',
                        filter_default_label: 'Select city'
                    },
                    {
                        column_number: 8,
                        filter_container_id: 'year-filter',
                        filter_default_label: 'Select year'
                    }
                ], {
                    cumulative_filtering: true,
                    filter_reset_button_text: 'Reset filter'
                });

                // get it started
                disableDependentFilter(1, true);

                $('.yadcf-filter-reset-button').on('click', function() {
                    level = parseInt(this.id.split('-')[4]);
                    disableDependentFilter(level, true);
                });

                $('.yadcf-filter').on('change', function() {
                    level = parseInt(this.id.slice(-1));
                    inuse = $(this).hasClass('inuse');

                    disableDependentFilter(level + 1, inuse);
                });
            }
        });
    });
    </script>
</body>

</html>